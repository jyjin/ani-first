(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t){t.ADD_USER="add_user",t.DEL_USER="del_user",t.SIGN_IN="sign_in",t.TOKEN_SIGN_IN="token_sign_in",t.TOKEN_SIGN_IN_LOADING="token_sign_in_loading",t.GOOD_LIST="good_list",t.UPDATE_IMG="update_img",t.PREVIEW="preview",t.PREVIEW_RESET="preview_reset",t.PERSONAL_GOOD_LIST="personal_good_list"},239:function(e,t,a){e.exports=a(525)},255:function(e,t,a){},316:function(e,t,a){var n=a(317).auto,r=a(320),i=r.cloneDeep,o=r.has,s=(a(321),a(38));e.exports=function(e){var t={};return e.map(function(e){t[e.name]=function(t,a,r){n({request:function(a){var n=e.isUpload?t:i(t),l=!1;if((!e.isUpload&&~e.url.indexOf(":")||~e.url.indexOf("\uff1a"))&&(e.url=e.url.replace(/:([A-Za-z_\$][A-Za-z0-9_\$]*)/g,function(e,a){return o(n,a)?t[a]:(l=!0,"undefined")}),l))return a("lack necessary Params");var c={url:e.url,method:e.isPost?"POST":"GET",data:t,query:r,isUpload:e.isUpload};console.log("options form == ",c.formData),function(e,t){var a=localStorage.getItem("ANF_TOKEN")||"",n={headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",token:a},method:e.method,url:s.siteUrl+e.url,params:e.query,data:e.data,isUpload:e.isUpload};function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(var n in e)t[a++]=[n,e[n]];return new URLSearchParams(t).toString()}e.isUpload&&(n.headers={Accept:"application/json",token:a});var i={};if("GET"===(e=Object.assign({},n)).method){e.params?e.params.token=a:e.params={token:a};var o=r(e.params);e.url+="?"+o,i={method:e.method,credentials:"include",mode:"cors"}}else i={method:e.method,credentials:"include",mode:"cors",headers:new Headers(e.headers),body:e.isUpload?e.data:r(e.data)};console.log("send fetch request... "),fetch(e.url,i).then(function(e){return e.json()}).then(function(e){t(null,e)}).catch(function(e){e.response?(console.log("[ Http response error ]"),console.log("[ - data ]",e.response.data),console.log("[ - status ]",e.response.status),console.log("[ - headers ]",e.response.headers),t("Http response error")):e.request?(console.log("[ Http request error ]"),console.log("[ - request ]",e.request),t(" Http request error ")):(console.log("[ Http error  ]"),console.log("[ - message ]",e.message),t(" Http error "))})}(c,a)}},function(e,t){a(e,t.request)})}}),Object.getOwnPropertyNames(t).map(function(e){t[e]=function(e,t){return function(){var a=arguments;return new Promise(function(n,r){e.apply(t,[].concat(a[0],[function(e,t){return e?r(e):n(t)}],a[1]))})}}(t[e],t)}),t}},38:function(e,t){e.exports={siteUrl:"http://jianleking.com:80",timeout:"5000"}},468:function(e,t,a){},525:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(11),o=a.n(i),s=a(127),l=a(71),c=a(226),u=a(227),p=a(18),d={user:{},token:"",loading:!0},h=function(e){return localStorage.setItem("ANF_TOKEN",e)},m=[],g=[],f={},v=Object(l.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0,a=JSON.parse(JSON.stringify(e));switch(t.type){case p.ADD_USER:a.token=t.payload.token,h(t.payload.token);break;case p.DEL_USER:break;case p.SIGN_IN:a.user=t.payload.user,h(t.payload.token),a.loading=!1;break;case p.TOKEN_SIGN_IN_LOADING:a.loading=!0;break;case p.TOKEN_SIGN_IN:a.user=t.payload.user||{},a.loading=!1}return a},good:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0,a=Object.assign({},e);switch(t.type){case p.GOOD_LIST:a.goodList=t.payload.prevGoodList.concat(t.payload.goodList);break;case p.UPDATE_IMG:var n=t.payload,r=n.image,i=n.index,o=n.innerIndex,s=n.goodList;a.goodList=s,a.goodList[i].imgs[o]=r}return a},personalGood:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0,a=Object.assign({},e);switch(t.type){case p.PERSONAL_GOOD_LIST:a.personalGoodList=t.payload.prevPersonalGoodList.concat(t.payload.personalGoodList);break;case p.UPDATE_IMG:var n=t.payload,r=n.image,i=n.index,o=n.innerIndex,s=n.personalGoodList;a.personalGoodList=s,a.personalGoodList[i].imgs[o]=r}return a},preview:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;console.log("store preview state = ",e),e=e||{};var a=Object.assign({},e);switch(t.type){case p.PREVIEW:a.preview=t.payload.preview;break;case p.PREVIEW_RESET:a.preview={}}return a}}),b=(Object(u.createLogger)(),Object(l.d)(v,Object(l.a)(c.a))),E=(a(84),a(20)),y=a(12),O=a(13),w=a(15),j=a(14),N=a(16),S=(a(74),a(33)),x=(a(171),a(131)),k=(a(135),a(46)),I=(a(85),a(9)),C=(a(136),a(24)),T=(a(255),a(120)),A=a(316)([{name:"test",url:"/user/test"},{name:"signIn",url:"/user/signIn",isPost:!0},{name:"signOut",url:"/user/offline",isPost:!0},{name:"register",url:"/user/register",isPost:!0},{name:"queryUserList",url:"/user/queryUserList"},{name:"authByToken",url:"/user/authByToken/:token"},{name:"hangupFriends",url:"/user/chatHangup",isPost:!0},{name:"changeFriends",url:"/user/chatSwitch",isPost:!0},{name:"addGood",url:"/good/add",isPost:!0,isUpload:!0},{name:"getGoodList",url:"/good/list",isPost:!0}]),L={title:{fontSize:"30px",padding:"5% 0 20px",color:"#27b764",textAlign:"center"}},_=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(w.a)(this,Object(j.a)(t).call(this,e))).validateToPhone=function(e,t,a){Object(T.isMobilePhone)(t)?a():a("\u8bf7\u8f93\u516511\u4f4d\u624b\u673a\u53f7")},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||(console.log("from data: ",t),a.apiLogin(t))})},a.state={},a}return Object(N.a)(t,e),Object(O.a)(t,[{key:"apiLogin",value:function(e){var t=this,a=this.props.loading("\u767b\u5f55\u4e2d...");A.signIn(e).then(function(e){e.res>0?(a.then(function(){t.props.success("\u767b\u5f55\u6210\u529f")}),t.props.dispatch(p.SIGN_IN,{user:e.data.user,token:e.data.token}),t.onNav("/")):a.then(function(){t.props.success(e.i18n[t.props.local])})})}},{key:"onNav",value:function(e){var t={pathname:e,state:{fromDashboard:!0}};this.props.history.push(t)}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.props.i18n,n=a.APP_NAME,i=a.ACCOUNT,o=a.PASSWORD,s=a.REMEMBER_ME,l=a.FORGET_PASSWORD,c=a.LOGIN_IN,u=a.REGISTER;return r.a.createElement("div",{style:{padding:"20px"}},r.a.createElement(C.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(C.a.Item,null,r.a.createElement("div",{style:L.title},n," ")),r.a.createElement(C.a.Item,null,t("phone",{rules:[{required:!0,message:"\u8bf7\u8f93\u516511\u4f4d\u624b\u673a\u53f7!"},{validator:this.validateToPhone}]})(r.a.createElement(k.a,{prefix:r.a.createElement(I.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:i}))),r.a.createElement(C.a.Item,null,t("password",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801!"}]})(r.a.createElement(k.a,{prefix:r.a.createElement(I.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:o}))),r.a.createElement(C.a.Item,null,t("remember",{valuePropName:"checked",initialValue:!0})(r.a.createElement(x.a,null,s)),r.a.createElement("a",{className:"login-form-forgot",href:""},l),r.a.createElement(S.a,{type:"primary",htmlType:"submit",className:"login-form-button"},c),r.a.createElement("a",{href:"javascript:null",onClick:function(){e.onNav("register")}},u))))}}]),t}(n.Component),P=C.a.create({name:"normal_login"})(_),D=(a(162),a(81)),R=(a(163),a(44)),G=(a(205),a(62));var U=function(e){return{dispatch:function(t,a){return e(function(e,t){return function(a,n){a({type:e,payload:t})}}(t,a))}}},H=function(e,t){return Object(s.b)(function(e){return e?function(t){var a={};for(var n in e)a[n]=t[e[n]][n];return a}:null}(e),U)(t)},M={title:{fontSize:"30px",padding:"5% 0 20px",color:"#27b764",textAlign:"center"}},F=G.a.Option,W=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(w.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).state={confirmDirty:!1},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||(console.log("from data: ",t),a.apiRegister(t))})},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.validateToPhone=function(e,t,a){Object(T.isMobilePhone)(t)?a():a("\u8bf7\u8f93\u516511\u4f4d\u624b\u673a\u53f7")},a.compareToFirstPassword=function(e,t,n){var r=a.props.form;t&&t!==r.getFieldValue("password")?n("\u4e24\u6b21\u8f93\u5165\u4e0d\u4e00\u81f4!"):n()},a.validateToNextPassword=function(e,t,n){var r=a.props.form;t&&a.state.confirmDirty&&r.validateFields(["confirm"],{force:!0}),n()},a.validateToCaptcha=function(e,t,a){t&&4!==t.length?a("\u8bf7\u8f93\u51654\u4f4d\u9a8c\u8bc1\u7801"):a()},a.validateToAgreement=function(e,t,a){t?a():a("\u8bf7\u4ed4\u7ec6\u9605\u8bfb\u534f\u8bae\u6761\u6b3e\uff0c\u540c\u610f\u540e\u624d\u53ef\u6ce8\u518c")},a}return Object(N.a)(t,e),Object(O.a)(t,[{key:"apiRegister",value:function(e){var t=this;A.register(e).then(function(e){e.res>0?(t.props.dispatch(p.ADD_USER,{token:e.data.token}),t.props.info(t.props.i18n.SUCCESS.TO.SAVE),t.onNav("login")):t.props.info(e.i18n[t.props.local])})}},{key:"onNav",value:function(e){var t={pathname:e,state:{fromDashboard:!0}};this.props.history.push(t)}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},n=t("prefix",{initialValue:"86"})(r.a.createElement(G.a,{style:{width:70}},r.a.createElement(F,{value:"86"},"+86"),r.a.createElement(F,{value:"87"},"+87"))),i=this.props.i18n,o=i.APP_NAME,s=i.PASSWORD,l=i.LOGIN_IN,c=i.REGISTER,u=i.CONFIRM_PASSWORD,p=i.PHONE,d=i.CAPTCHA,h=i.I_HAVE_READ,m=i.AGREEMENT,g=i.INPUT_PASSWORD,f=i.INPUT_CONFIRM_PASSWORD,v=i.INPUT_PHONE,b=i.INPUT_CAPTCHA,E=i.EXTRA_CAPTCHA,y=i.GET_CAPTCHA,O=i.HAVE_ACCOUNT;return r.a.createElement(C.a,Object.assign({className:"register-form"},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onSubmit:this.handleSubmit}),r.a.createElement("div",{style:M.title},o+" "+c," "),r.a.createElement(C.a.Item,a,O,r.a.createElement("a",{href:"javascript:null",onClick:function(){e.onNav("login")}},l)),r.a.createElement(C.a.Item,{label:p},t("phone",{rules:[{required:!0,message:v},{validator:this.validateToPhone}]})(r.a.createElement(k.a,{addonBefore:n,style:{width:"100%"}}))),r.a.createElement(C.a.Item,{label:s},t("password",{rules:[{required:!0,message:g},{validator:this.validateToNextPassword}]})(r.a.createElement(k.a,{type:"password"}))),r.a.createElement(C.a.Item,{label:u},t("confirm",{rules:[{required:!0,message:f},{validator:this.compareToFirstPassword}]})(r.a.createElement(k.a,{type:"password",onBlur:this.handleConfirmBlur}))),r.a.createElement(C.a.Item,{label:d,extra:E},r.a.createElement(D.a,{gutter:8},r.a.createElement(R.a,{span:12},t("captcha",{rules:[{required:!0,message:b},{validator:this.validateToCaptcha}]})(r.a.createElement(k.a,null))),r.a.createElement(R.a,{span:12},r.a.createElement(S.a,null,y)))),r.a.createElement(C.a.Item,a,t("agreement",{valuePropName:"checked",rules:[{validator:this.validateToAgreement}]})(r.a.createElement(x.a,null,h," ",r.a.createElement("a",{href:"javascript:null"},m)))),r.a.createElement(C.a.Item,a,r.a.createElement(S.a,{type:"primary",htmlType:"submit"},c)))}}]),t}(n.Component),z=H(null,C.a.create({name:"register"})(W)),B=(a(452),a(101)),V=(a(59),a(22)),q=(a(69),a(32)),K=a(72),J=V.a.Footer,Q={footer:{padding:"10px 0",textAlign:"center",background:"#fff"},row:{margin:0,padding:"0"},icon:{fontSize:"20px",padding:"5px",cursor:"pointer"},iconHover:{fontSize:"20px",color:"#25b864",padding:"5px",cursor:"pointer"},loading:{position:"absolute",left:"50%",top:"50%",margin:"-18.5px -16px"}},Y=function(e){function t(){return Object(y.a)(this,t),Object(w.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(O.a)(t,[{key:"onNav",value:function(e){var t=this.props.history;console.log("jyjin ",this.props);var a={pathname:e,state:{fromDashboard:!0}};t.replace(a)}},{key:"setIconStyle",value:function(e){return"outlined"}},{key:"setStyle",value:function(e){return this.props.history.location.pathname===e?Q.iconHover:Q.icon}},{key:"render",value:function(){var e=this;return r.a.createElement(J,{style:Q.footer},r.a.createElement(D.a,{gutter:16,style:Q.row},r.a.createElement(R.a,{className:"gutter-row",span:6},r.a.createElement("div",{className:"gutter-box"},r.a.createElement(I.a,{onClick:function(){return e.onNav("/")},style:this.setStyle("/"),type:"home",theme:this.setIconStyle("/")}))),r.a.createElement(R.a,{className:"gutter-row",span:6},r.a.createElement("div",{className:"gutter-box"},r.a.createElement(I.a,{onClick:function(){return e.onNav("ani")},style:this.setStyle("/ani"),type:"thunderbolt",theme:this.setIconStyle("/ani")}))),r.a.createElement(R.a,{className:"gutter-row",span:6},r.a.createElement("div",{className:"gutter-box"},r.a.createElement(I.a,{onClick:function(){return e.onNav("find")},style:this.setStyle("/find"),type:"deployment-unit",theme:this.setIconStyle("/find")}))),r.a.createElement(R.a,{className:"gutter-row",span:6},r.a.createElement("div",{className:"gutter-box"},r.a.createElement(I.a,{onClick:function(){return e.onNav("user")},style:this.setStyle("/user"),type:"user",theme:this.setIconStyle("/user")})))))}}]),t}(n.Component),Z=Object(K.e)(Y),X=(V.a.Header,V.a.Content),$={header:{padding:"0 12px",background:"#fff"},row:{margin:"0",padding:"0",background:"#fff",borderBottom:"1px solid #e8e8e8"},content:{padding:"0",height:"calc(100vh - 52.5px )"},loading:{position:"absolute",left:"50%",top:"50%",margin:"-18.5px -16px"}},ee=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(w.a)(this,Object(j.a)(t).call(this,e))).setA=function(){alert("setA")},a.state={visible:!1},a}return Object(N.a)(t,e),Object(O.a)(t,[{key:"onNav",value:function(e){var t=this.props.history;console.log("jyjin ",this.props);var a={pathname:e,state:{fromDashboard:!0}};t.push(a)}},{key:"render",value:function(){return localStorage.getItem("ANF_TOKEN")||""||this.onNav("login"),this.props.loading?r.a.createElement("div",{style:$.loading},r.a.createElement(q.a,{size:"large"})):(this.props.user._id||this.onNav("login"),r.a.createElement(V.a,null,r.a.createElement(X,{style:$.content,className:"webkit-scroll scrollPersonWrap"},this.props.children),r.a.createElement(Z,null)))}}]),t}(n.Component),te=H({token:"user",user:"user",loading:"user"},Object(K.e)(ee)),ae=a(38),ne=0,re=1e3,ie=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(w.a)(this,Object(j.a)(t).call(this,e))).onEnter=function(e){e.keyCode},a.longPress=function(){ne=0,a.props.longPress()},a.onTouchStart=function(e){ne=setTimeout(function(){a.longPress(e)},re)},a.onTouchMove=function(e){clearTimeout(ne),ne=0},a.onTouchEnd=function(e){return clearTimeout(ne),!1},a.onClick=function(e){},a.state={},a}return Object(N.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return r.a.createElement("div",Object.assign({},this.props,{onClick:this.onClick,onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd,onEnter:this.onEnter}),this.props.children)}}]),t}(n.Component),oe=a(118),se=a.n(oe),le=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(w.a)(this,Object(j.a)(t).call(this,e))).cauImage=function(){var e=document.body.clientWidth,t=document.body.clientHeight,n=a.state,r=n.width/n.height;return r>e/t?{width:e,height:e/r}:{width:r*t,height:t}},a.onSwipeLeft=function(e){a.props.turnNext()},a.onSwipeRight=function(e){a.props.turnPrev()},a.state={visible:a.props.preview.visible||!1,src:a.props.preview.src,alt:a.props.preview.alt,width:a.props.preview.width,height:a.props.preview.height,name:a.props.preview.name,price:a.props.preview.price},a}return Object(N.a)(t,e),Object(O.a)(t,[{key:"componentWillReceiveProps",value:function(e){e!==this.props&&this.setState({visible:e.preview.visible,src:e.preview.src,alt:e.preview.alt,width:e.preview.width,height:e.preview.height,name:e.preview.name,price:e.preview.price})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{width:"100%",height:"100%",position:"absolute",top:0,lef:0,zIndex:10,background:"black",display:"flex",alignItems:"center",transform:"scale("+(this.state.visible?1:0)+")",webkitTransition:"all .5s"}},r.a.createElement("div",{onClick:function(){e.setState({visible:!1}),e.props.reset()}},r.a.createElement(se.a,{onSwipeLeft:this.onSwipeLeft,onSwipeRight:this.onSwipeRight},this.state.error?r.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement("div",{style:{width:"300px",height:"300px",background:"#eee",textAlign:"center",color:"white",lineHeight:"158px",fontSize:"40px"}},"AniFirst")):r.a.createElement("img",{src:this.state.src,width:this.state.cw,height:this.state.ch,alt:this.state.alt,onLoad:function(){e.setState({cw:e.cauImage().width,ch:e.cauImage().height})},onError:function(){e.setState({})}}))),r.a.createElement("div",{style:{position:"absolute",bottom:0,display:"flex",justifyContent:"space-between",padding:"10px 20px",width:"100%",color:"#fff",background:"rgba(0, 0, 0, 0.5)"}},r.a.createElement("span",null,this.state.name),r.a.createElement("span",null,"\u4ef7\u683c\uff1a",this.state.price,"\uffe5")))}}]),t}(n.Component),ce={header:{padding:"0 12px",background:"#fff"},row:{margin:"0",padding:"0",background:"#fff",borderBottom:"1px solid #e8e8e8"},wrap:{margin:"0 auto",padding:"20px",display:"flex",flexWrap:"wrap",alignItems:"center"},good:{margin:"5px 0",padding:"20px",background:"white"},imgs:{margin:"0 0 10px 0",display:"flex",flexWrap:"wrap"},loading:{margin:"20p auto"}},ue=Number(new Date),pe=H({goodList:"good",preview:"preview"},function(e){function t(e,a){var n;return Object(y.a)(this,t),(n=Object(w.a)(this,Object(j.a)(t).call(this,e))).onScroll=function(){var e=document.getElementById("scrollWrap");e.onscroll=function(){var t=e.scrollHeight,a=e.scrollTop;if(e.clientHeight+a>=t){var r=Number(new Date);r-ue>1e3&&(n.setState(function(e){return{page:e.page+1}},n.getGoodList),ue=r)}else a<0&&n.setState(function(e){return{page:1}},function(){n.getGoodList("down")})}},n.getImage=function(e,t){var a="".concat(ae.siteUrl,"/").concat(e.fileName,"?"),n=new Image;n.src=a,n.onload=function(){e.width=n.width,e.height=n.height,t(null,e)},n.onerror=function(){e.width=0,e.height=0,e.error=!0,t("image not found",e)}},n.cauImage=function(e){var t=n.state.size;return e.width>e.height?{width:e.width/e.height*t,height:t}:{width:t,height:t/(e.width/e.height)}},n.longPress=function(e,t,a){var r=JSON.parse(JSON.stringify(e)),i=JSON.parse(JSON.stringify(t)),o=JSON.parse(JSON.stringify(a)),s={visible:!0,src:ae.siteUrl+"/"+r.fileName,fileName:r.fileName,alt:r.realName,width:r.width,height:r.height,name:i.name,price:i.price,indexObj:o};n.props.dispatch(p.PREVIEW,{preview:s})},n.onSwipeDown=function(){n.getGoodList("down")},n.onSwipeUp=function(){n.setState(function(e){return{page:e.page+1}},n.getGoodList)},n.state={size:160,page:1,loading:!0},n}return Object(N.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){this.getGoodList(),this.onScroll()}},{key:"getGoodList",value:function(e){var t=this;e?this.setState({loadingDown:!0}):this.setState({loading:!0}),A.getGoodList({page:this.state.page}).then(function(a){if(a.res>0){var n=[];if(!a.data.length){e?t.setState({loadingDown:!1,page:t.state.page-1}):t.setState({loading:!1,page:t.state.page-1}),E.a.config({top:"calc(100vh - 100px)",maxCount:1}),E.a.warning("\u6ca1\u6709\u66f4\u591a");var r=document.getElementById("scrollWrap"),i=r.clientHeight,o=r.scrollHeight;return console.log("scroll height == ",o),void(r.scrollTop=o-i-10)}a.data&&a.data.map(function(e){e.imgs&&e.imgs.map(function(e){n.push(new Promise(function(n){t.getImage(e,function(t,r){e=r,n(a)})}))})}),Promise.all(n).then(function(a){t.props.dispatch(p.GOOD_LIST,{goodList:a[a.length-1].data,prevGoodList:e?[]:t.props.goodList||[]}),e?t.setState({loadingDown:!1}):t.setState({loading:!1})})}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:Object.assign({},ce.wrap,{display:this.props.visible?"block":"none"})},this.state.loadingDown?r.a.createElement("div",{style:{display:"flex",justifyContent:"center",paddingTop:"20px"}},r.a.createElement(q.a,{size:"large",tip:"\u6570\u636e\u5237\u65b0\u4e2d..."})):null,this.props.goodList&&this.props.goodList.length&&this.props.goodList.map(function(t,a){return r.a.createElement("div",{key:t._id,style:ce.good,className:"flexWidth"},r.a.createElement("div",{key:t._id,style:ce.imgs},t.imgs&&t.imgs.map(function(n,i){var o=e.cauImage(n),s=o.width,l=o.height;return r.a.createElement("div",{key:n.fileName.toString(),style:{display:"flex",alignItems:"center",justifyContent:"space-around",margin:"3px",width:e.state.size,height:e.state.size,background:"gray",overflow:"hidden"}},n.error?r.a.createElement("div",{style:{width:e.state.size,height:e.state.size,background:"#eee",textAlign:"center",color:"white",lineHeight:"158px",fontSize:"40px"}},"AniFirst"):r.a.createElement(ie,{className:"no-touch",longPress:function(){return e.longPress(n,t,{itemIndex:a,imgIndex:i})}},r.a.createElement("img",{key:"img_"+t.fileName,style:{display:"block",width:s,height:l},src:ae.siteUrl+"/"+n.fileName,alt:n.realName})))})),r.a.createElement("p",{key:"p_"+t._id,style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("span",null,t.name),r.a.createElement("span",null,"\u4ef7\u683c\uff1a",t.price,"\uffe5")))}),this.state.loading?r.a.createElement("div",{style:{display:"flex",justifyContent:"center",paddingTop:"20px"}},r.a.createElement(q.a,{size:"large",tip:"\u594b\u529b\u52a0\u8f7d\u4e2d..."})):null)}}]),t}(n.Component)),de=(V.a.Header,{margin:"0 auto",width:"96%",padding:"20px 0px",display:"flex",flexWrap:"wrap",alignItems:"center"}),he=H({goodList:"good"},function(e){function t(e,a){var n;return Object(y.a)(this,t),(n=Object(w.a)(this,Object(j.a)(t).call(this,e))).state={},n}return Object(N.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{style:Object.assign({},de,{display:this.props.visible?"block":"none"})},"Page 2")}}]),t}(n.Component)),me=(V.a.Header,{margin:"0 auto",width:"96%",padding:"20px 0px",display:"flex",flexWrap:"wrap",alignItems:"center"}),ge=H({goodList:"good"},function(e){function t(e,a){var n;return Object(y.a)(this,t),(n=Object(w.a)(this,Object(j.a)(t).call(this,e))).state={},n}return Object(N.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{style:Object.assign({},me,{display:this.props.visible?"block":"none"})},"Page 3")}}]),t}(n.Component)),fe=V.a.Header,ve={header:{padding:"0 12px",background:"#fff"},row:{margin:"0",padding:"0",background:"#fff",borderBottom:"1px solid #e8e8e8"},wrap:{height:"calc(100vh - 52.5px - 66px )",width:"100%",overflow:"auto",webkitOverflowSscrolling:"touch"}},be=H({goodList:"good",preview:"preview"},function(e){function t(e,a){var n;return Object(y.a)(this,t),(n=Object(w.a)(this,Object(j.a)(t).call(this,e))).handleClick=function(e,t,a){n.setState({key:e.key})},n.getPage=function(){var e=n.state.key;return"hot"===e?r.a.createElement(pe,n.props):"featured"===e?r.a.createElement(he,n.props):"near"===e?r.a.createElement(ge,n.props):void 0},n.visible=function(e){return n.state.key===e},n.turnPrev=function(){var e=n.props.preview.indexObj,t=n.props.goodList[e.itemIndex];if(e.imgIndex>0){e.imgIndex-=1;var a=n.props.goodList[e.itemIndex].imgs[e.imgIndex],r={visible:!0,src:ae.siteUrl+"/"+a.fileName,alt:a.realName,width:a.width,height:a.height,name:t.name,price:t.price,indexObj:e};n.props.dispatch(p.PREVIEW,{preview:r})}else E.a.config({maxCount:1}),E.a.warning("\u7b2c\u4e00\u5f20")},n.turnNext=function(){var e=n.props.preview.indexObj,t=JSON.parse(JSON.stringify(n.props.goodList)),a=t[e.itemIndex].imgs.length,r=t[e.itemIndex];if(e.imgIndex<a-1){e.imgIndex+=1;var i=t[e.itemIndex].imgs[e.imgIndex];ae.siteUrl,i.fileName,i.realName,i.width,i.height,r.name,r.price;n.props.dispatch(p.PREVIEW_RESET,{})}else E.a.config({maxCount:1}),E.a.warning("\u6700\u540e\u4e00\u5f20")},n.reset=function(){n.props.dispatch(p.PREVIEW,{})},n.state={key:"hot"},n}return Object(N.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement(te,null,r.a.createElement(fe,{style:ve.header},r.a.createElement(D.a,{gutter:{xs:8,sm:16,md:24},style:ve.row},r.a.createElement(R.a,{key:"1",className:"gutter-row",xs:21,sm:22,md:22,lg:23,xl:23,xxl:23},r.a.createElement(B.a,{mode:"horizontal",defaultSelectedKeys:[this.state.key],style:{lineHeight:"64px",border:"none"},onClick:this.handleClick},r.a.createElement(B.a.Item,{key:"hot"},"\u70ed\u95e8"),r.a.createElement(B.a.Item,{key:"featured"},"\u7cbe\u9009"),r.a.createElement(B.a.Item,{key:"near"},"\u9644\u8fd1"))),r.a.createElement(R.a,{key:"2",className:"gutter-row",xs:3,sm:2,md:2,lg:1,xl:1,xxl:1}))),r.a.createElement("div",{id:"scrollWrap",style:ve.wrap},r.a.createElement(pe,Object.assign({visible:this.visible("hot")},this.props)),r.a.createElement(he,Object.assign({visible:this.visible("featured")},this.props)),r.a.createElement(ge,Object.assign({visible:this.visible("near")},this.props))),r.a.createElement(le,{preview:this.props.preview||{visible:!1,src:"",alt:"",width:0,height:0,name:"",price:"",indexObj:null},turnPrev:function(){return e.turnPrev()},turnNext:function(){return e.turnNext()},reset:function(){e.reset()}}))}}]),t}(n.Component)),Ee=(a(210),a(130)),ye=(a(224),a(129)),Oe=(a(464),a(169)),we=(V.a.Header,V.a.Content),je={header:{padding:"0 12px",background:"#fff"},row:{margin:"0",padding:"0",background:"#fff",borderBottom:"1px solid #e8e8e8"},content:{padding:"0",height:"calc(100vh - 52.5px )",overflow:"auto"},loading:{position:"absolute",left:"50%",top:"50%",margin:"-18.5px -16px"}},Ne=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(w.a)(this,Object(j.a)(t).call(this,e))).state={},a}return Object(N.a)(t,e),Object(O.a)(t,[{key:"onNav",value:function(e){var t=this.props.history;console.log("jyjin ",this.props);var a={pathname:e,state:{fromDashboard:!0}};t.push(a)}},{key:"render",value:function(){return localStorage.getItem("ANF_TOKEN")||""||this.onNav("login"),this.props.loading?r.a.createElement("div",{style:je.loading},r.a.createElement(q.a,{size:"large"})):(this.props.user._id||this.onNav("login"),r.a.createElement(V.a,null,r.a.createElement(we,{style:je.content,className:"webkit-scroll"},this.props.children),r.a.createElement(Z,null)))}}]),t}(n.Component),Se=H({token:"user",user:"user",loading:"user"},Object(K.e)(Ne)),xe=(a(93),a(35)),ke=a(98),Ie=function(e){function t(e,a){var n;return Object(y.a)(this,t),n=Object(w.a)(this,Object(j.a)(t).call(this,e)),console.log("...props: ",n.props),n.state={msgList:[]},n}return Object(N.a)(t,e),Object(O.a)(t,[{key:"sendRequest",value:function(){for(var e=this,t=this.state.msgList,a=0;a<1001;a++)!function(a){console.log("send === ",a),A.queryUserList().then(function(n){console.log("recv === ".concat(a," "),n),n.res>0?t.push({i:a,msg:n.msg,result:n.data}):t.push({i:a,msg:n.msg,result:""}),e.setState({msgList:t})})}(a)}},{key:"render",value:function(){var e,t=this;return r.a.createElement("div",null,r.a.createElement(S.a,{type:"primary",style:{marginTop:"24px",width:"100%"},onClick:function(){return t.sendRequest()}},"\u53d1\u9001\u6279\u91cf\u8bf7\u6c42"),r.a.createElement(S.a,{type:"primary",style:{marginTop:"24px",width:"100%"},onClick:function(){return t.setState({msgList:[]})}},"\u6e05\u7a7a"),r.a.createElement(xe.a,{style:(e={marginTop:"24px",width:"100%",background:"#fff"},Object(ke.a)(e,"marginTop","0px"),Object(ke.a)(e,"borderRadius","0"),e),bordered:!0,dataSource:this.state.msgList,renderItem:function(e){return r.a.createElement(xe.a.Item,null,"\u7b2c".concat(e.i,"\u6b21\u8bf7\u6c42\u7ed3\u679c == ")+e.msg)}}))}}]),t}(n.Component),Ce={header:{padding:"0 12px",background:"#fff"},row:{margin:"0",padding:"0",background:"#fff",borderBottom:"1px solid #e8e8e8"},wrap:{margin:"0 auto",padding:"20px",display:"flex",flexWrap:"wrap",alignItems:"center"},good:{margin:"5px 0",padding:"20px",background:"white"},imgs:{margin:"0 0 10px 0",display:"flex",flexWrap:"wrap"},loading:{margin:"20p auto"}},Te=Number(new Date),Ae=H({personalGoodList:"personalGood",preview:"preview"},function(e){function t(e,a){var n;return Object(y.a)(this,t),(n=Object(w.a)(this,Object(j.a)(t).call(this,e))).onScroll=function(){var e=document.getElementsByClassName("ant-tabs-tabpane ant-tabs-tabpane-active")[0];e.onscroll=function(){var t=e.scrollHeight,a=e.scrollTop;if(e.clientHeight+a>=t){var r=Number(new Date);r-Te>1e3&&(n.setState(function(e){return{page:e.page+1}},n.getGoodList),Te=r)}else a<0&&n.setState(function(e){return{page:1}},function(){n.getGoodList("down")})}},n.getImage=function(e,t){var a="".concat(ae.siteUrl,"/").concat(e.fileName,"?"),n=new Image;n.src=a,n.onload=function(){e.width=n.width,e.height=n.height,t(null,e)},n.onerror=function(){e.width=0,e.height=0,e.error=!0,t("image not found",e)}},n.cauImage=function(e){var t=n.state.size;return e.width>e.height?{width:e.width/e.height*t,height:t}:{width:t,height:t/(e.width/e.height)}},n.longPress=function(e,t,a){var r=JSON.parse(JSON.stringify(e)),i=JSON.parse(JSON.stringify(t)),o=JSON.parse(JSON.stringify(a)),s={visible:!0,src:ae.siteUrl+"/"+r.fileName,fileName:r.fileName,alt:r.realName,width:r.width,height:r.height,name:i.name,price:i.price,indexObj:o};n.props.dispatch(p.PREVIEW,{preview:s})},n.onSwipeDown=function(){n.getGoodList("down")},n.onSwipeUp=function(){n.setState(function(e){return{page:e.page+1}},n.getGoodList)},n.state={size:160,page:1,loading:!0},n}return Object(N.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){this.getGoodList(),this.onScroll()}},{key:"getGoodList",value:function(e){var t=this;e?this.setState({loadingDown:!0}):this.setState({loading:!0}),A.getGoodList({page:this.state.page,userId:this.props.user._id}).then(function(a){if(a.res>0){var n=[];if(!a.data.length){e?t.setState({loadingDown:!1,page:t.state.page-1}):t.setState({loading:!1,page:t.state.page-1}),E.a.config({top:"calc(100vh - 100px)",maxCount:1}),E.a.warning("\u6ca1\u6709\u66f4\u591a");var r=document.getElementsByClassName("ant-tabs-tabpane ant-tabs-tabpane-active")[0],i=r.clientHeight,o=r.scrollHeight;return console.log("scroll height == ",o),void(r.scrollTop=o-i-10)}a.data&&a.data.map(function(e){e.imgs&&e.imgs.map(function(e){n.push(new Promise(function(n){t.getImage(e,function(t,r){e=r,n(a)})}))})}),Promise.all(n).then(function(a){t.props.dispatch(p.PERSONAL_GOOD_LIST,{personalGoodList:a[a.length-1].data,prevPersonalGoodList:e?[]:t.props.prevPersonalGoodList||[]}),e?t.setState({loadingDown:!1}):t.setState({loading:!1})})}})}},{key:"render",value:function(){var e=this;return console.log("personal == ",this.props.personalGoodList),r.a.createElement("div",{id:"scrollPersonWrap",style:Object.assign({},Ce.wrap)},this.state.loadingDown?r.a.createElement("div",{style:{display:"flex",justifyContent:"center",paddingTop:"20px"}},r.a.createElement(q.a,{size:"large",tip:"\u6570\u636e\u5237\u65b0\u4e2d..."})):null,this.props.personalGoodList&&this.props.personalGoodList.length&&this.props.personalGoodList.map(function(t,a){return r.a.createElement("div",{key:t._id,style:Ce.good,className:"flexWidth"},r.a.createElement("div",{key:t._id,style:Ce.imgs},t.imgs&&t.imgs.map(function(a,n){var i=e.cauImage(a),o=i.width,s=i.height;return r.a.createElement("div",{key:a.fileName.toString(),style:{display:"flex",alignItems:"center",justifyContent:"space-around",margin:"3px",width:e.state.size,height:e.state.size,background:"gray",overflow:"hidden"}},a.error?r.a.createElement("div",{style:{width:e.state.size,height:e.state.size,background:"#eee",textAlign:"center",color:"white",lineHeight:"158px",fontSize:"40px"}},"AniFirst"):r.a.createElement(ie,{className:"no-touch"},r.a.createElement("img",{key:"img_"+t.fileName,style:{display:"block",width:o,height:s},src:ae.siteUrl+"/"+a.fileName,alt:a.realName})))})),r.a.createElement("p",{key:"p_"+t._id,style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("span",null,t.name),r.a.createElement("span",null,"\u4ef7\u683c\uff1a",t.price,"\uffe5")))}),this.state.loading?r.a.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"center",paddingTop:"20px"}},r.a.createElement(q.a,{size:"large",tip:"\u594b\u529b\u52a0\u8f7d\u4e2d..."})):null)}}]),t}(n.Component)),Le=(a(468),{red:15,yellow:3,green:15}),_e=function(e){function t(e,a){var n;return Object(y.a)(this,t),(n=Object(w.a)(this,Object(j.a)(t).call(this,e))).setLight=function(e,t){return new Promise(function(a){n.timeTick(e,t),setTimeout(function(){a({color:e,time:t})},1e3*t)})},n.timeTick=function(e,t){var a=t,r=setInterval(function(){0!=a?(console.log("Traffic light: ".concat(e," == ").concat(a,"s")),n.setStyle(e,a--)):clearInterval(r)},1e3)},n.setStyle=function(e,t){(t+="")/10<1&&(t="0"+t);var a=n.state,r=a.red,i=a.yellow,o=a.green;r="",i="",o="","red"===e?r=t:"yellow"===e?i=t:o=t,n.setState({red:r,yellow:i,green:o})},n.TrafficLight=function(){n.setLight("red",Le.red).then(function(e){return n.setLight("yellow",Le.yellow)}).then(function(e){return n.setLight("green",Le.green)}).then(function(e){n.TrafficLight()})},n.getStyle=function(e){return e?{opacity:1}:{opacity:.5}},n.state={red:"",yellow:"",green:""},n}return Object(N.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){this.TrafficLight()}},{key:"sendRequest",value:function(){for(var e=0;e<3;e++)A.getUserList().then(function(e){console.log("=== i === ",e)})}},{key:"render",value:function(){return r.a.createElement("div",{className:"traffic-wrap"},r.a.createElement("div",{className:"traffic-light"},r.a.createElement("div",{className:"red-light",style:this.getStyle(this.state.red)},this.state.red),r.a.createElement("div",{className:"yellow-light",style:this.getStyle(this.state.yellow)},this.state.yellow),r.a.createElement("div",{className:"green-light",style:this.getStyle(this.state.green)},this.state.green)),r.a.createElement("div",{className:"hoz-line"}),r.a.createElement("div",{className:"vet-line"}))}}]),t}(n.Component),Pe=(a(526),a(237).a.Dragger),De=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(w.a)(this,Object(j.a)(t).call(this,e))).handleSubmit=function(){var e=a.state.fileList,t=new FormData;e.forEach(function(e,a){console.log(e.originFileObj),t.append("file".concat(a),e.originFileObj)}),a.props.form.validateFields(function(e,n){if(!e){if(a.state.fileCountError)return void E.a.error("\u6700\u591a4\u5f20\u56fe\u7247");for(var r in n)t.append(r,n[r]);t.append("userId",a.props.user._id),a.setState({uploading:!0});var i=E.a.loading("\u4e0a\u4f20\u4e2d...");A.addGood(t).then(function(e){console.log("add good == ",e),e.res>0?(i.then(function(e){return E.a.success("\u4e0a\u4f20\u6210\u529f\uff01")}),a.props.onClose(),a.onNav("/")):i.then(function(e){return E.a.error("\u4e0a\u4f20\u5931\u8d25\uff01")})})}})},a.state={fileList:[]},a}return Object(N.a)(t,e),Object(O.a)(t,[{key:"onNav",value:function(e){var t={pathname:e,state:{fromDashboard:!0}};this.props.history.replace(t)}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a={name:"file",multiple:!0,accept:"image/*",showUploadList:{showPreviewIcon:!0,showRemoveIcon:!0},onChange:function(t){var a=t.file.status;if(console.log("info == ",a),t.fileList&&t.fileList.length>4)return E.a.config({maxCount:1}),E.a.error("\u4e0d\u80fd\u8d85\u8fc74\u5f20\u56fe\u7247"),void e.setState({fileCountError:!0});e.setState({fileCountError:!1}),"uploading"!==a&&(console.log("info.file = ",t.file),console.log("info.fileList = ",t.fileList),e.setState({fileList:t.fileList})),"done"===a?E.a.success("".concat(t.file.name," file uploaded successfully.")):"error"===a&&E.a.error("".concat(t.file.name," file upload failed."))},onRemove:function(t){e.setState(function(e){var a=e.fileList.indexOf(t),n=e.fileList.slice();return n.splice(a,1),{fileList:n}})},beforeUpload:function(t){return e.setState(function(e){return{fileList:e.fileList.concat(t)}}),!1}};return r.a.createElement("div",{style:{padding:"20px"}},r.a.createElement(C.a,{className:"login-form"},r.a.createElement(C.a.Item,null,r.a.createElement(Pe,a,r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(I.a,{type:"inbox"})),r.a.createElement("p",{className:"ant-upload-text"},"\u8f7b\u89e6\u533a\u57df\u9009\u62e9\u56fe\u7247"),r.a.createElement("p",{className:"ant-upload-hint"},"\u652f\u6301\u4e00\u4e2a\u6216\u591a\u4e2a\u56fe\u7247\u4e0a\u4f20"))),r.a.createElement(C.a.Item,null,t("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0!"},{validator:this.validateToPhone}]})(r.a.createElement(k.a,{placeholder:"\u5546\u54c1\u540d\u79f0"}))),r.a.createElement(C.a.Item,null,t("price",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4ef7\u683c!"},{validator:this.validateToPhone}]})(r.a.createElement(k.a,{placeholder:"\u4ef7\u683c/\u5143"}))),r.a.createElement(C.a.Item,null,r.a.createElement(S.a,{type:"primary",className:"login-form-button",onClick:function(){return e.handleSubmit()}},"\u53d1\u5e03"))))}}]),t}(n.Component),Re=C.a.create({name:"normal_login"})(De),Ge=H({token:"user",user:"user",loading:"user"},Object(K.e)(Re)),Ue=Oe.a.TabPane;function He(e){console.log(e)}var Me={header:{padding:"0 12px",background:"#fff"},row:{margin:"0",padding:"0",background:"#fff",borderBottom:"1px solid #e8e8e8"},content:{padding:"0 50px",minHeight:"calc(100vh - 52.5px )"},tabs:{background:"#fff",minHeight:"calc(100vh - 52.5px)"},tabPane:{background:"#f0f2f5"},icon:{position:"absolute",padding:"22px 0",width:"60px",top:0,right:0,fontSize:"20px",color:"#25b864"}},Fe=function(e){function t(e,a){var n;return Object(y.a)(this,t),(n=Object(w.a)(this,Object(j.a)(t).call(this,e))).onClose=function(){n.setState({visible:!1})},n.state={visible:!1},n}return Object(N.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Se,null,r.a.createElement(Oe.a,{defaultActiveKey:"1",onChange:He,style:Me.tabs},r.a.createElement(Ue,{style:Me.tabPane,tab:"\u5168\u90e8",key:"1"},r.a.createElement(Ae,this.props)),r.a.createElement(Ue,{style:Me.tabPane,tab:"\u6848\u4f8b",key:"2"},r.a.createElement(Ie,this.props)),r.a.createElement(Ue,{style:Me.tabPane,tab:"\u7ea2\u8def\u706f",key:"3"},r.a.createElement(_e,this.props))),r.a.createElement(I.a,{type:"camera",size:"large",style:Me.icon,onClick:function(){return e.setState({visible:!0})}}),r.a.createElement(Ee.a,{className:"user-drawer",title:r.a.createElement(ye.a,{title:"\u6dfb\u52a0\u5546\u54c1",onBack:function(){e.onClose()}}),width:"100%",height:"100%",placement:"bottom",closable:!1,onClose:this.onClose,visible:this.state.visible},r.a.createElement(Ge,Object.assign({},this.props,{onClose:this.onClose}))))}}]),t}(n.Component),We=V.a.Header,ze=V.a.Content,Be={header:{padding:0,background:"#fff",textAlign:"center"},headerBar:{fontWeight:"bold",fontSize:"16px",color:"rgba(0, 0, 0, 0.85)"},content:{padding:"0 50px",height:"calc(100vh - 66px - 52.5px )",overflow:"auto"},loading:{position:"absolute",left:"50%",top:"50%",margin:"-18.5px -16px"}},Ve=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(w.a)(this,Object(j.a)(t).call(this,e))).state={},a}return Object(N.a)(t,e),Object(O.a)(t,[{key:"onNav",value:function(e){var t=this.props.history;console.log("jyjin ",this.props);var a={pathname:e,state:{fromDashboard:!0}};t.push(a)}},{key:"render",value:function(){return localStorage.getItem("ANF_TOKEN")||""||this.onNav("login"),this.props.loading?r.a.createElement("div",{style:Be.loading},r.a.createElement(q.a,{size:"large"})):(this.props.user._id||this.onNav("login"),r.a.createElement(V.a,null,r.a.createElement(We,{theme:"light",style:Be.header},r.a.createElement("div",{style:Be.headerBar},"\u53d1\u73b0")),r.a.createElement(ze,{style:Be.content},this.props.children),r.a.createElement(Z,null)))}}]),t}(n.Component),qe=H({token:"user",user:"user",loading:"user"},Object(K.e)(Ve)),Ke=function(e){function t(e,a){var n;return Object(y.a)(this,t),n=Object(w.a)(this,Object(j.a)(t).call(this,e)),console.log("...props: ",n.props),n}return Object(N.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return r.a.createElement(qe,null,r.a.createElement("div",{style:{padding:"20px 0"}},"\u6211\u60f3\u5728\u8fd9\u505a\u4e2a\u76c6\u53cb\u5708"))}}]),t}(n.Component),Je=V.a.Header,Qe=V.a.Content,Ye={header:{padding:0,background:"#fff",textAlign:"center"},headerBar:{fontWeight:"bold",fontSize:"16px",color:"rgba(0, 0, 0, 0.85)"},content:{padding:"0",height:"calc(100vh - 66px - 52.5px )",overflow:"auto"},icon:{fontSize:"20px",color:"#25b864",padding:"5px",cursor:"pointer"},loading:{position:"absolute",left:"50%",top:"50%",margin:"-18.5px -16px"}},Ze=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(w.a)(this,Object(j.a)(t).call(this,e))).state={},a}return Object(N.a)(t,e),Object(O.a)(t,[{key:"onNav",value:function(e){var t=this.props.history;console.log("jyjin ",this.props);var a={pathname:e,state:{fromDashboard:!0}};t.push(a)}},{key:"render",value:function(){return localStorage.getItem("ANF_TOKEN")||""||this.onNav("login"),this.props.loading?r.a.createElement("div",{style:Ye.loading},r.a.createElement(q.a,{size:"large"})):(this.props.user._id||this.onNav("login"),r.a.createElement(V.a,null,r.a.createElement(Je,{theme:"light",style:Ye.header},r.a.createElement("div",{style:Ye.headerBar},"\u4e2a\u4eba\u4e2d\u5fc3")),r.a.createElement(Qe,{style:Ye.content},this.props.children),r.a.createElement(Z,null)))}}]),t}(n.Component),Xe=H({token:"user",user:"user",loading:"user"},Object(K.e)(Ze)),$e=function(e){function t(e,a){var n;return Object(y.a)(this,t),(n=Object(w.a)(this,Object(j.a)(t).call(this,e))).state={},n}return Object(N.a)(t,e),Object(O.a)(t,[{key:"onNav",value:function(e){var t={pathname:e,state:{fromDashboard:!0}};this.props.history.push(t)}},{key:"render",value:function(){var e=this;console.log("=== user: ",this.props.user);var t=this.props.user,a=[];return a.push("\u7528\u6237\u540d\uff1a"+(t.username||"")),a.push("\u624b\u673a\u53f7\u7801\uff1a"+(t.phone||"")),a.push("\u90ae\u7bb1\uff1a"+(t.email||"")),a.push("\u6027\u522b\uff1a"+(t.gender||"")),r.a.createElement("div",null,r.a.createElement(xe.a,{style:{width:"100%",background:"#fff",marginTop:"0px",borderRadius:"0"},bordered:!0,dataSource:a,renderItem:function(e){return r.a.createElement(xe.a.Item,null,e)}}),r.a.createElement(S.a,{type:"primary",style:{marginTop:"24px",width:"100%"},onClick:function(){localStorage.removeItem("ANF_TOKEN"),e.onNav("/")}},"\u9000\u51fa\u767b\u5f55"))}}]),t}(n.Component),et=Object(K.e)($e),tt=function(e){function t(e,a){var n;return Object(y.a)(this,t),(n=Object(w.a)(this,Object(j.a)(t).call(this,e))).state={},n}return Object(N.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(xe.a,{style:{width:"100%",background:"#fff",marginTop:"0px",borderRadius:"0"},bordered:!0,dataSource:["\u6682\u65e0\u6570\u636e"],renderItem:function(e){return r.a.createElement(xe.a.Item,null,e)}}))}}]),t}(n.Component),at=function(e){function t(e,a){var n;return Object(y.a)(this,t),(n=Object(w.a)(this,Object(j.a)(t).call(this,e))).state={},n}return Object(N.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(xe.a,{style:{width:"100%",background:"#fff",marginTop:"0px",borderRadius:"0"},bordered:!0,dataSource:["\u6682\u65e0\u6570\u636e"],renderItem:function(e){return r.a.createElement(xe.a.Item,null,e)}}))}}]),t}(n.Component),nt=[{key:"account",text:"\u8d26\u53f7"},{key:"collection",text:"\u6536\u85cf"},{key:"draft",text:"\u8349\u7a3f\u7bb1"}],rt=function(e){function t(e,a){var n;return Object(y.a)(this,t),(n=Object(w.a)(this,Object(j.a)(t).call(this,e))).handleClick=function(e){console.log("key == ",e),n.setState({key:e,visible:!0,title:nt.find(function(t){return t.key===e}).text})},n.onClose=function(){n.setState({visible:!1})},n.state={title:"",visible:!1,child:null},n}return Object(N.a)(t,e),Object(O.a)(t,[{key:"navRoute",value:function(e){this.props.history.push({pathname:"/about",state:{fromDashboard:!0}})}},{key:"getChild",value:function(){var e=null;switch(this.state.key){case"account":e=r.a.createElement(et,this.props);break;case"collection":e=r.a.createElement(tt,this.props);break;case"draft":e=r.a.createElement(at,this.props);break;default:e=null}return e}},{key:"render",value:function(){var e=this;return r.a.createElement(Xe,null,r.a.createElement(xe.a,{style:{width:"100%",background:"#fff",marginTop:"10px",borderRadius:"0"},bordered:!0,dataSource:nt,renderItem:function(t){return r.a.createElement(xe.a.Item,{style:{display:"flex",justifyContent:"space-between",cursor:"pointer"},actions:[r.a.createElement(I.a,{type:"right",style:{padding:"5px 10px"}})],onClick:function(){e.handleClick(t.key)}},t.text)}}),r.a.createElement(Ee.a,{className:"user-drawer",title:r.a.createElement(ye.a,{onBack:function(){e.onClose()},title:this.state.title}),width:"100%",placement:"right",closable:!1,onClose:this.onClose,visible:this.state.visible},this.getChild()))}}]),t}(n.Component),it=function(e){function t(){return Object(y.a)(this,t),Object(w.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{margin:"10px",marginLeft:"10px"}},"About")}}]),t}(n.Component),ot=function(e){function t(e,a){var n;return Object(y.a)(this,t),n=Object(w.a)(this,Object(j.a)(t).call(this,e)),console.log("...props: ",n.props),n}return Object(N.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{padding:"20px 0",textAlign:"center"}},r.a.createElement("h1",{style:{color:"#27b764"}},"404 Not Found"),r.a.createElement("div",{style:{color:"#ddd"}},"\u60a8\u8bbf\u95ee\u7684\u9875\u9762\u4f3c\u4e4e\u4e0d\u5b58\u5728\uff0c\u8bf7\u68c0\u67e5\u68c0\u67e5\u9875\u9762\u5730\u5740 ",r.a.createElement("code",{style:{textDecoration:"underline",color:"#27b764",cursor:"pointer"}},'"',window.location.origin+this.props.location.pathname,'"')))}}]),t}(n.Component),st=a(52),lt=a(236),ct=Object(K.e)(function(e){var t=e.component,a=Object(lt.a)(e,["component"]);return r.a.createElement(K.a,Object.assign({},a,{render:function(e){return console.log("...props of app and Route: ",a),console.log("...props of routeProps: ",e),function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var i=Object.assign.apply(Object,[{}].concat(a));return r.a.createElement(e,i)}(t,e,a)}}))}),ut=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(w.a)(this,Object(j.a)(t).call(this,e))).state={},a}return Object(N.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return console.log("...props of app custom: ",this.props),r.a.createElement(st.a,null,r.a.createElement(K.c,null,r.a.createElement(ct,Object.assign({},this.props,{exact:!0,path:"/login",component:P})),r.a.createElement(ct,Object.assign({},this.props,{exact:!0,path:"/register",component:z})),r.a.createElement(ct,Object.assign({},this.props,{exact:!0,path:"/",component:be})),r.a.createElement(ct,Object.assign({},this.props,{exact:!0,path:"/ani",component:Fe})),r.a.createElement(ct,Object.assign({},this.props,{exact:!0,path:"/find",component:Ke})),r.a.createElement(ct,Object.assign({},this.props,{exact:!0,path:"/user",component:rt})),r.a.createElement(ct,Object.assign({},this.props,{path:"/about",component:it})),r.a.createElement(ct,Object.assign({},this.props,{component:ot}))))}}]),t}(n.Component),pt=a(82),dt={ADD:"\u6dfb\u52a0\u6210\u529f",REMOVE:"\u5220\u9664\u6210\u529f",MODIFY:"\u4fee\u6539\u6210\u529f",QUERY:"\u67e5\u8be2\u6210\u529f",SAVE:"\u4fdd\u5b58\u6210\u529f",UPLOAD:"\u4e0a\u4f20\u6210\u529f",DOWNLOAD:"Download\u6210\u529f"},ht={ADD:"\u6dfb\u52a0\u5931\u8d25",REMOVE:"\u5220\u9664\u5931\u8d25",MODIFY:"\u4fee\u6539\u5931\u8d25",QUERY:"\u67e5\u8be2\u5931\u8d25",SAVE:"\u4fdd\u5b58\u5931\u8d25",UPLOAD:"\u4e0a\u4f20\u5931\u8d25",DOWNLOAD:"\u4e0b\u8f7d\u5931\u8d25"},mt={SUCCESS:Object(pt.a)({},dt,{TO:dt}),FAILED:Object(pt.a)({},ht,{TO:ht}),APP_NAME:"AniFirst",ACCOUNT:"\u8d26\u53f7",PASSWORD:"\u5bc6\u7801",REMEMBER_ME:"\u4e0b\u6b21\u81ea\u52a8\u767b\u5f55",FORGET_PASSWORD:"\u5fd8\u8bb0\u5bc6\u7801",LOGIN_IN:"\u767b\u5f55",REGISTER:"\u65b0\u7528\u6237\u6ce8\u518c",EMAIL:"\u90ae\u7bb1",CONFIRM_PASSWORD:"\u786e\u8ba4\u5bc6\u7801",NICKNAME:"\u6635\u79f0",ADDRESS:"\u5e38\u4f4f\u5730\u5740",PHONE:"\u624b\u673a\u53f7",WEBSITE:"\u4e2a\u4eba\u7f51\u7ad9",CAPTCHA:"\u9a8c\u8bc1\u7801",I_HAVE_READ:"\u6211\u5df2\u9605\u8bfb",AGREEMENT:"\u534f\u8bae",INPUT_EAMAIL:"\u8bf7\u8f93\u5165\u90ae\u7bb1",INPUT_PASSWORD:"\u8bf7\u8f93\u5165\u5bc6\u7801",INPUT_CONFIRM_PASSWORD:"\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801",INPUT_PHONE:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801",INPUT_NICKNAME:"\u8bf7\u8f93\u5165\u6635\u79f0",SELECT_ADDRESS:"\u8bf7\u9009\u62e9\u5e38\u4f4f\u5730\u5740",INPUT_CAPTCHA:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",INPUT_WEBSITE:"\u8bf7\u586b\u5199\u4e2a\u4eba\u7f51\u7ad9\u5730\u5740",EXTRA_CAPTCHA:"\u6211\u4eec\u5fc5\u987b\u786e\u8ba4\u60a8\u662f\u672c\u4eba",GET_CAPTCHA:"\u83b7\u53d6\u9a8c\u8bc1\u7801",HAVE_ACCOUNT:"\u5df2\u6709\u8d26\u53f7\uff0c\u76f4\u63a5",HOME:"\u4e3b\u9875",ABOUT:"\u5173\u4e8e",QUIT:"\u9000\u51fa",ZH:"\u4e2d\u6587",EN:"EN",SEND:"\u53d1\u9001",SIGN_TITLE:"\u6b22\u8fce\u4f7f\u7528",SIGN_IN:"\u5f00\u59cb\u7834\u5427",CLEAR:"\u6e05\u7a7a",CONTROL:"\u63a7\u5236\u5668",DO_SUCCESS:"\u64cd\u4f5c\u6210\u529f",DESC:"\u53e4\u91d1\uff0c\u8bf7\u7ee7\u7eed\u5b8c\u5584\u6211\u5427\uff0c\u52a0\u6cb9\uff01"},gt={ADD:"Add success",REMOVE:"Remove success",MODIFY:"Modify success",QUERY:"Query success",SAVE:"Save success",UPLOAD:"Upload success",DOWNLOAD:"Download success"},ft={ADD:"Add failed",REMOVE:"Remove failed",MODIFY:"Modify failed",QUERY:"Query failed",SAVE:"Save failed",UPLOAD:"Upload failed",DOWNLOAD:"download failed"},vt={SUCCESS:Object(pt.a)({},gt,{TO:gt}),FAILED:Object(pt.a)({},ft,{TO:ft}),QUIT:"Quit",ZH:"\u4e2d\u6587",EN:"EN",APP_NAME:"Ani-First",SEND:"Send",SIGN_TITLE:"Sign in",SIGN_IN:"Sign in for Ani-First",ACCOUNT:"Account",PASSWORD:"Password",CLEAR:"Clear",CONTROL:"Control",HOME:"Home",ABOUT:"About",DO_SUCCESS:"do success"},bt=a(1),Et=a.n(bt),yt=function(e){function t(e,a){var n;Object(y.a)(this,t),n=Object(w.a)(this,Object(j.a)(t).call(this,e,a));var r=localStorage.getItem("LOCAL")||"cn";return n.state={local:r,appInfo:{version:"0.0.1",title:"Ani First",subTitle:"\u72d7\u72d7\u662f\u7f8e\u597d\u5bb6\u5ead\u7684\u7075\u9b42\uff0c\u732b\u54aa\u662f\u72ec\u8eab\u7684\u5b8c\u7f8e\u966a\u4f34",author:"jyjin",design:"jyjin",createAt:"2019-3-20"}},n}return Object(N.a)(t,e),Object(O.a)(t,[{key:"getChildContext",value:function(){var e=this.state;return{local:e.local,appInfo:e.appInfo}}},{key:"componentDidMount",value:function(){this.authByToken()}},{key:"authByToken",value:function(){var e=this,t=localStorage.getItem("ANF_TOKEN")||"";t&&(this.props.dispatch(p.TOKEN_SIGN_IN_LOADING,{loading:!0}),A.authByToken({token:t}).then(function(t){t.res>0?e.props.dispatch(p.TOKEN_SIGN_IN,{user:t.data.user,loading:!1}):(e.props.dispatch(p.TOKEN_SIGN_IN,{user:null,loading:!1}),e.info("\u8eab\u4efd\u5df2\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55"))}))}},{key:"info",value:function(){for(var e,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return(e=E.a.info).call.apply(e,[E.a].concat(a))}},{key:"success",value:function(){for(var e,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return(e=E.a.success).call.apply(e,[E.a].concat(a))}},{key:"error",value:function(){for(var e,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return(e=E.a.error).call.apply(e,[E.a].concat(a))}},{key:"warn",value:function(){for(var e,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return(e=E.a.warn).call.apply(e,[E.a].concat(a))}},{key:"warning",value:function(){for(var e,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return(e=E.a.warning).call.apply(e,[E.a].concat(a))}},{key:"loading",value:function(){for(var e,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return(e=E.a.loading).call.apply(e,[E.a].concat(a))}},{key:"render",value:function(){return console.log("render app ..."),r.a.createElement(ut,Object.assign({},this.props,this.state,{i18n:(e=this.state.local,"cn"===e?mt:"en"===e?vt:mt),info:this.info.bind(this),success:this.success.bind(this),error:this.error.bind(this),warn:this.warn.bind(this),warning:this.warning.bind(this),loading:this.loading.bind(this)}));var e}}]),t}(n.Component);yt.childContextTypes={local:Et.a.string,appInfo:Et.a.object};var Ot=H({token:"user",user:"user"},yt);o.a.render(r.a.createElement(s.a,{store:b},r.a.createElement(Ot,null)),document.getElementById("root"))}},[[239,1,2]]]);
//# sourceMappingURL=main.b4340aea.chunk.js.map